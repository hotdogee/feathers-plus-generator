
/* <%- tplJsOrTs('eslint quotes: 0', 'tslint:disable:quotemark') %> */
// Defines Mongoose model for service `<%= serviceName %>`. (Can be re-generated.)
<%- tplImports('merge', 'lodash.merge', 'req') %>
// <%- lintDisableNextLineUnused %>
<%- tplJsOrTs(
  `const mongoose = require('mongoose')${sc}`,
  `import mongoose from 'mongoose'${sc}`,
) %>
<%- insertFragment('imports') %>
<%- insertFragment('init') %>

let moduleExports = merge({},
  <%- insertFragment('model', mongooseSchemaStr.length <= 2 ? mongooseSchemaStr.split('\n').map(str => `  ${str}`).join('\n').slice(0,-1) : mongooseSchemaStr.split('\n').map(str => `  ${str}`).join('\n').slice(0,-4)) %>
  <%- insertFragment('moduleExports', '  }') %>
)<%- sc %>

<%- insertFragment('exports') %>
<%- `${tplExport('moduleExports')}${sc}` %>

<%- insertFragment('funcs') %>
<%- insertFragment('end') %>
